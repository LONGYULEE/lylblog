<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.liyulong.blog.main.mapper.sys.SysUserRoleMapper">

    <!-- 通用查询映射结果 -->
    <resultMap id="BaseResultMap" type="com.liyulong.blog.main.pojo.sys.SysUserRole">
        <id column="id" property="id" />
        <result column="user_id" property="userId" />
        <result column="role_id" property="roleId" />
    </resultMap>

<!--    查询用户所有的权限-->
    <select id="queryAllPerms" resultType="java.lang.String">
--         select sm.perms from sys_user_role sur
--         left join sys_role_menu srm on sur.role.id = srm.role.id
--         left join sys_menu sm on srm.menu_id = sm.menu.id
--         where sur.user.id = #{userId}
    </select>

<!--    查询用户所有的菜单Id-->
    <select id="queryAllMenuId" resultType="java.lang.Integer">
--         select distinct rm.menu.id from sys_user_role sur
--         left join sys_role_menu rm on ur.role_id = rm.role_id
--         where ur.user_id = #{userId}
    </select>

</mapper>
